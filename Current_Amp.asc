Version 4
SHEET 1 988 680
WIRE 608 -128 416 -128
WIRE 688 -128 608 -128
WIRE 784 -128 688 -128
WIRE 608 -96 608 -128
WIRE 688 -64 688 -128
WIRE 352 -48 320 -48
WIRE 448 -48 352 -48
WIRE 240 -16 240 -48
WIRE 608 16 608 -16
WIRE 784 48 784 -128
WIRE 416 64 416 -128
WIRE 688 64 688 16
WIRE 752 64 688 64
WIRE 352 80 352 -48
WIRE 384 80 352 80
WIRE 880 80 816 80
WIRE 208 96 64 96
WIRE 448 96 448 32
WIRE 496 96 448 96
WIRE 752 96 496 96
WIRE 208 112 208 96
WIRE 256 112 208 112
WIRE 368 112 336 112
WIRE 384 112 368 112
WIRE 784 128 784 112
WIRE 64 144 64 96
WIRE 208 144 208 112
WIRE 688 144 688 64
WIRE 416 160 416 128
WIRE 368 176 368 112
WIRE 688 240 688 224
WIRE 64 272 64 224
WIRE 208 272 208 224
WIRE 368 272 368 256
FLAG 608 16 0
FLAG 416 160 0
FLAG 64 272 0
FLAG 208 272 0
FLAG 240 -16 0
FLAG 368 272 0
FLAG 496 96 Vcur
FLAG 208 96 Vsense
FLAG 784 128 0
FLAG 688 240 0
FLAG 880 80 OCflag
SYMBOL res 192 128 R0
SYMATTR InstName R1
SYMATTR Value 0.1
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL Opamps\\UniversalOpamp2 416 96 R0
SYMATTR InstName U1
SYMBOL voltage 608 -112 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 432 48 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 50k
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL res 352 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL res 384 272 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL res 336 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 4k
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL Opamps\\UniversalOpamp2 784 80 R0
SYMATTR InstName U2
SYMBOL res 672 -80 R0
SYMATTR InstName R6
SYMATTR Value 5k
SYMBOL res 672 128 R0
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL bi2 64 144 R0
SYMATTR InstName B1
SYMATTR Value I=time
TEXT 30 296 Left 2 !.tran 3s
